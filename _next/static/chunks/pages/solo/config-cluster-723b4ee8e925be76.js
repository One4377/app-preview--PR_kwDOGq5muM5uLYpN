(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[950],{52667:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/solo/config-cluster",function(){return r(95509)}])},95509:function(e,s,r){"use strict";r.r(s);var i=r(85893),t=r(67294),n=r(87536),l=r(96497),d=r(2543),o=r(35292),a=r(84496),c=r(11163),u=r(30272),f=r(26618),p=r(33147);let ConfigCluster=()=>{let e=(0,a.o)(e=>e.clusterDefinition),{control:s,register:r,handleSubmit:g,formState:{errors:m,isDirty:h,isValid:x},setValue:A,trigger:C}=(0,n.cI)({mode:"onChange",defaultValues:{singleAddress:"",feeRecipientAddress:"",name:""}}),v=(0,c.useRouter)(),S=(0,a.o)(e=>e.completeSoloStep),j=(0,a.o)(e=>e.enableSoloStep),N=(0,a.o)(e=>e.updateClusterDefinition),{account:k}=(0,o.kR)(),[b,w]=(0,t.useState)((null==e?void 0:e.clusterSize)||p.dd),_=(0,o.D9)(b),[R,y]=(0,t.useState)((null==e?void 0:e.validatorsSize)||1),[z,E]=(0,t.useState)(),[D,$]=(0,t.useState)();return(0,t.useEffect)(()=>{R&&E(32*R)},[R]),(0,t.useEffect)(()=>{if(b){let e=(0,u.zT)(b);$(e)}},[_,b]),(0,t.useEffect)(()=>{A("singleAddress",null==e?void 0:e.singleAddress),A("feeRecipientAddress",null==e?void 0:e.feeRecipientAddress),(null==e?void 0:e.name)&&A("name",null==e?void 0:e.name,{shouldDirty:!0,shouldValidate:!0})},[]),(0,i.jsxs)(l.kC,{direction:"column",css:{gap:"$2xl"},children:[(0,i.jsx)(l.xv,{variant:"h3",children:"Configure Cluster"}),(0,i.jsx)(d.l0,{onSubmit:g(e=>{S("config-cluster"),N({...e,creator:{address:k},validatorsEthAmount:z,operators:Array(b).fill({address:""}),validators:Array(R).fill({feeRecipientAddress:e.feeRecipientAddress,withdrawalAddress:e.singleAddress})});let s=j("confirm-configuration");v.push(s.href)}),children:(0,i.jsxs)(l.kC,{direction:"column",css:{gap:"$2xl"},children:[(0,i.jsx)(l.W2,{className:"cluster-details",alignItems:"start",children:(0,i.jsxs)(l.kC,{direction:"column",css:{gap:"$2xl"},children:[(0,i.jsx)(f.PQ,{register:r,clusterSize:b,setClusterSize:w,control:s,min:Number(p.Gb)}),(0,i.jsxs)(l.kC,{direction:"column",className:"operator-address-section",css:{gap:"$sm"},children:[(0,i.jsx)(l.xv,{css:{textTransform:"uppercase"},variant:"subline",color:"body",children:"Cluster Created By"}),(0,i.jsx)(l.xv,{color:"obolGreen",children:k})]})]})}),(0,i.jsx)(f.J1,{control:s,validatorsSize:R,setValidatorsSize:y}),(0,i.jsx)(l.W2,{className:"withdrawal-section",css:{gap:"$xl"},alignItems:"start",children:(0,i.jsx)(f.AN,{control:s,trigger:C,errors:m,handleOnSetAddress:e=>{e.preventDefault(),A("singleAddress",k),C("singleAddress")},heading:"Withdrawal Address",description:"Address to receive skimming rewards and validator principal at exit.",fieldName:"singleAddress"})}),(0,i.jsx)(l.W2,{className:"fee-recipient-section",css:{gap:"$xl"},alignItems:"start",children:(0,i.jsx)(f.AN,{control:s,trigger:C,errors:m,handleOnSetAddress:e=>{e.preventDefault(),A("feeRecipientAddress",k),C("feeRecipientAddress")},heading:"Fee Recipient",description:"Address to receive transaction fees from block proposals.",fieldName:"feeRecipientAddress"})}),(0,i.jsx)(l.kC,{direction:"column",children:(0,i.jsx)(l.zx,{color:"primary",type:"submit",disabled:!k||!x||!h,children:"Create Cluster Configuration"})})]})})]})};s.default=ConfigCluster,ConfigCluster.layout="SoloProgressTrackerLayout"}},function(e){e.O(0,[774,888,179],function(){return e(e.s=52667)}),_N_E=e.O()}]);